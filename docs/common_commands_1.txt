# Clean, rebuild, and start full environment
docker stop $(docker ps -aq) 2>/dev/null
docker system prune -a --volumes -f
docker compose down -v
docker compose up -d --build
docker ps

# Access container shell
docker exec -it pdf-ocr-devcontainer bash

# Validate all integrations
python3 - <<'PYEOF'
from ultralytics import YOLO
import pytesseract, psycopg2
model = YOLO('models/yolov8n.pt')
print("YOLOv8 ✅", model.info())
print("Tesseract ✅", pytesseract.get_tesseract_version())
conn = psycopg2.connect(host="docker-db-1", user="postgres", password="postgres")
print("PostgreSQL ✅", conn.get_dsn_parameters())
conn.close()
PYEOF

# Launch app
streamlit run src/streamlit/streamlit_app.py --server.port=8501
